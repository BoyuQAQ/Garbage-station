# 文件操作上

[传送门](https://www.bilibili.com/video/BV1jt4y1j7tF?p=12&vd_source=64709a8217a1bbd540960dd246f1356a)



## 文件的打开与关闭

什么是文件?
文件有不同的类型，在程序设计中，主要用到两种文件:(1)程序文件。这一类型的文件主要用于存储程序代码。
数据文件。此文件的内容不是程序，而是程序运行时读写的数据，二、文件的概念1、文件名

每一个文件都需要一个唯一的文件标识，以便用户使用。

文件标识也称为文件名，它由3部分组成:

①文件路径:表示文件在外存设备中的存储位置;

②文件名主干:表示文件的名字，可由用户自定义

③文件后缀:表示文件的性质，也称为文件的格式(如txt、ppt等)

#### 2、文件的分类

根据数据的组织形式，数据文件可分为文本文件和二进制文件。

 编译器：源文件 .c   .cpp   -》 二进制   .obj 

指向文件的指针
#### 1、文件指针的定义

定义文件指针的基本格式为:FILE *文件指针名;

如:FILE *fp;//定义一个指针fp用于指向文件

#### 2、打开与关闭文件
(1)用fopen函数打开文件
C语言规定用 文件标准输入输出函数fopen来实现打开文件。fopen函数的调用方式为:fopen(文件名，使用文件的方式);

例如:fopen(“1.txt”,”r”);//以只读的方式打开文件“1.txt”

(2)用fclose函数关闭文件

在使用完一个文件之后，为了防止它被误用，应该关闭它关闭文件fclose函数的基本格式为:fcalose(文件指针);

例如:fclose(fp);//关闭文件指针fp所指向的文件信息区

#### 操作数据文件

第一件事  打开文件：通过定义文件指针指向文件

#### 文件指针的定义：FILE  \*   名字

第二件事：用文件指针指向文件

fopen(“文件路径”，“打开方式”);

文件路径：绝对路径	相对路径

第三件事	文件操作：通过函数对文件中的数据进行操作

第四件事	关闭文件



```c
//往文件中写入一个字符
fputc("c",file);
fputc("c",file);
fputc("c",file);
fputc("c",file);
fputc(65,file);
```

```c
//  往文件中写入一个字符串
char str[ ] =“dsadasaf”
fputs(str,file);
```

```c
// 读取
char  c;
c = fgetc(file);
printf("%c\n",c);
c = fgetc(file);
printf("%c\n",c);
```

```c
//读取字符串
char str[1024]= {0};
fgets(str,3,file);//有一个\0占一个字符
printf("%s\n",str);
fclose(file);
```

```c
//读取整个文件
char str[10240]={0};
int x=0;
while(!feof(file))//判断文件指针是否读到了末尾，到了便会返回真，没到返回假{
    str[x]=fgetc(file);
	x++;
}
printf("%s",str);

```

## 顺序读写文件

```c
FILE * file=fopen("2.txt","w"); //打开文件的时候，如果没有文件，会自动创建 这个文件
int a=10;
char str[]="asdf";
fprintf(file,"%d %s\n",a,str);//文件化格式的输入输出
fprintf(file,"id:%d\t name:%s\n",a,str);
fclose(file);
```

### 文件的打开方式

| 文件的打开方式 | 含义                                     | 如果指定的文件不存在 |
| -------------- | ---------------------------------------- | -------------------- |
| “r”（只读）    | 为了输入数据，打开一个已存在的文本文件   | 出错                 |
| “w”（只写）    | 为了输出数据，打开一个文本文件           | 新建文件             |
| ”a”（追加）    | 向文本文件尾部添加数据                   | 出错                 |
| “rb”（只读）   | 为了输入数据，打开一个已存在的二进制文件 | 出错                 |
| “wb”（只写）   | 为了输出数据，打开一个二进制文件         | 新建文件             |
| “ab”（追加)    | 向二进制文件尾部添加数据                 | 出错                 |
| “r+”（读写）   | 为了读和写，打开一个文本文件             | 出错                 |
| “w+”（读写)    | 为了读和写，打开一个文本文件             | 新建文件             |
| “a+”   (读写)  | 为了读和写，打开一个文本文件             | 出错                 |
| “rb+”  (读写)  | 为了读和写，打开一个二进制文件           | 出错                 |
| “wb+”(读写)    | 为了读和写，打开一个二进制文件           | 新建文件             |
| “ab+”(读写)    | 为了读和写，打开一个二进制文件           | 出错                 |

```c
//以二进制形式写入
FILE * file =fopen("3.txt","wb");
char str[]="asdf";
int a=10;
fwrite(
	&a,//写入的东西
    4,//写入的数据的字节大小
    1,//写入的数据的个数
    file);//从哪个文件里面读
    fclose(file);
```

```c
FILE *file=fopen("3.jpg","rb"); //图片是以二进制形式存储的，要以rb的方式打开
fseek(//文件指针移动
	file,
	1,//移动的字节数  如果正数就往后移动，负数往前移动，0不移动
	2，);//从哪个位置开始移动	0：文件开头  1：文件指针当前位置   2：文件指针末尾的位置
    
    int size=ftell(file);//获取文件指针的偏移量
    printf("%d\n",size);
    fclose(file);
 
```

# 文件操作下

```c
FILE * file =fopen("2.txt","w"); //打开文件的时候，如果没有文件，会自动创建一个该文件
```

```c
//以二进制形式写入
FILE * file=fopen("3.txt","wb");
char str[]="asdf";
int a=10;
fwrite(&a,//写入的东西
      4，//写入的数据的字节的大小
      file);
fclose(file);
//以二进制读取
FILE *file1 =fopen("3.txt","rb");
int a=0;
fread(&a,//都到哪里去
     4，//读取的字节大小
     1，//读取的个数
     file1);//从哪个文件里面读
printf("%d\n",a);
fclose(file1);
```

```c
//fclose(file1);
//0:文件开头
//1:文件指针当前的位置
//2:文件指针末尾的位置
FILE * file=fopen("3.jpg","rb");//图片是以二进制形式存储的，要以rb的方式进行读取
fessk(file,
     1，//移动的字节数 证书往后移动  负数往前移动
     2);//从哪个位置开始移动
int size=ftell(file);//获取文件指针的偏移量
printf("%d\n",size);
fclose(file);
```

```c
FILE * file1 =fopen("4.txt","r+");
fseek(file1,3,1);
fpute("A",file1);
fclose(file1);
```

