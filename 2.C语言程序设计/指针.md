# 指针

地址：数据在内存中地存储位置编号，是常量

指针： 本质就是地址

指针变量：存储的数据是地址

类型\* 标识符;

取地址符：&	

指针变量取了谁的地址

\*的作用：指针变量的标志

\*：解引用	取内容

指针变量：占4字节内存

定义指针的时候要马上给指针变量赋值，防止出现野指针（没有任何指向）

数组名本身就代表是数组的首地址

```c
//NULL:空
int *a1=NULL;
float *a2;
double *a3;
printf("%d\n%d\n%d\n%d\n",sizeof(a1),sizeof(a2),sizeof(a3));
```

```c
void fun(int *x,int *y)
{
    *x =3;
    *y =0; 
}
int main()
{
    int a=10,b=20;
    fun(&a,&b);//参数是一个指针变量，要等于一个指针所以要传一个地址
    printf("%d\n%d\n",a,b);
}
```

```c
int main()
{
    int arr[10]={1,2,3,4,5,6,7,8,9,10};
    for (int i=0;i<10;i++)
    {
        printf("%p\n",arr[i]);//%p:输出地址的存储形式，由于数组是连续存储的集合，因此输出结果也是连续的
    }
}
```

```c
//常量字符串
char * p1="hello world";
printf("%d\n",sizeof(p1));
printf("%d\n",strlen(p1));
```

```c
//指针也是有类型的，指针的类型就是定义的时候 类型*
int arr[10] ={1,2,3,4,5,6,7,8,9,10};
double * p2 =(double *)&arr[0];//由于是double占八个字节，所以是跨过了2直接到了3
p2++;
printf("%d\n",*((int *)p2));
```

# 特殊指针

指针函数：是一个函数，但是这个函数的返回值类型是一个指针

函数指针：是一个指针，这个指针的指向是一个函数

函数指针的定义格式：函数的返回值类型 （*函数指针名）（函数的形参列表）：

```c
int * fun()
{
    int a=10;//a是一个局部变量，用完就释放了
    return &a;//返回值类型是一个指针所以这是，指针函数
}
int main()
{
    int*p=fun();
    printf("%d\n",*p);//能输出一次的原因，是因为编译器做了一个优化，但是从逻辑上看是不能发生的。
}
```

```c
//函数名就是这个函数的首地址
void fun1(int a,int b){
    
}
void(*pFun)(int a,int b);//函数指针的定义方法
int main()
{
    pFun=fun1;//函数指针调用别的函数
    pFun(1,2);//函数指针的调用
    fun1(3,4);
}
```

```c
typedef int(*pF)(int, int);//函数指针取别名，别名就是他自己，且别名可以当作类型去使用
```

## 常量指针和指针常量

```c
//常量指针：定义不用初始化，能改变指向，指向的内容不能被修改。
const int *p;
//指针常量：定义的时候必须要初始化，不能改变指向，可以改变指向的内存区域的内容
//这个常量的值是一个指针
int * const p1;
//保护实参不被函数形参调用修改。 
```

### 大端存储和小端存储

```c

//数据的地址：0x12345678	0x0-0x3这四个字节当中
//0x0  12  0x1  34  0x2  56  0x3   78	大端存储	适合的读取方式
//0x0  78  0x1  56  0x2  34  0x3   12	小端存储	x86CPU使用的小端存储作为数据的存储方式
```



# 结构体指针

## 1、指向结构体变量的指针

所谓的结构体指针就是指向结构体变量的指针，一个结构体变量的起始地址就是这个结构体变量的指针。如果把一个结构体变量的起始地址存放在一个指针变量中，那么这个指针变量就指向此结构体变量。

## 2、结构体指针的定义

如有以下结构体：

```c
struct student{int id;char * name;char sex[4];}s1,s2,s3;
//则可以定义指向struct student类型结构体的指针：
struct student  * sp;
sp = &s1;//用结构体指针sp指向struct student类型的结构体变量s1
```

```c
typedef struct nodeDate //给nodeDate这个结构体取一个别名叫做Node
{
    int a;
    char name[20];
}node;
void main()
{
     node n;//把node给了变量n
    n.a=10;
    //结构体指针
     node * p=&n;
     p->a=20;//指针访问成员要用箭头因为P不是变量也不是对象
    printf("%d\n",n.a);
}
```

```c

void mian(){
    node n[5]={
        {1,"aaa"},
        {2,"bbb"},
        {3,"ccc"},
        {4,"ddd"},
        {5,"eee"},
    };
    node *p[5]={&n[3],&n[2]};
    printf("%d\t%s\n"p[0]->a);
}
```

动态内存分配：从堆区申请内存，自己使用

通过函数  malloc  calloc  realloc

从堆区申请的内存是通过指针执行管理的 

使用free函数进行释放

在释放内存的时候，在free函数中填的指针，必须要指向内存的首地址

赋值的条件：类型相同

在函数里面申请的堆区内存，不会随着函数结束而释放，需要手动释放



# 指针型函数与函数指针变量

## 一、指针型函数

1、指针型函数：是一个函数，只不过这个函数的返回值是一个指针。

2、回顾函数的定义：

函数的返回值类型	函数名（形参列表）

{

​	代码块；

} 

3、现在，定义一个指针型函数，比如：

```c
int * fun()//在这里，函数 的返回值类型是int *
{
    //使用malloc函数申请一片内存，并且返回这边内存的地址
    int *p=(Int *)malloc(10*sizeof(int));
    return p;
}
```

# 指针常量

1、指针常量

就是指针的只想不能够被改变的指针，也就是指针类型的常量，指针中存储的地址不可被改变

如：int \* const p;

它的只想能够被改变，但是不能够改变值。

2、常量指针

就是指向常量的指针，也就是指针指向的地址内的值不可被改变，其又被称为只读指针

指向常量的指针常量

指针常量和常量指针一般用于函数参数的传递，为了使在函数使用中不改变值以及指针的指向。

如：

```c
void fun(const int * const p)//指向常量的指针常量
{
    //指针p是一个只读指针，防止篡改
    //既不能改变指针p的指向，也不能改变其只想地址里的值。
}
```



示例：

```c
int main()
{
    int a=10;
    //int *p=&a;
    //指针常量	指针变量的内存不能够被改变
    int *const p=&a;
    int b=20;
    //p=&b;不合法
    *p=100;//地址上的数据可以改变
    int b=20;
    p=&b;
    printf("%d\n",*p);//指针变量的指向可以被改变 
    printf("%d\n",a);
}//常量指针：指针变量保存的地址，这个地址上的数据不能被改变，但是可以改变指针变量的指向
//常量指针，保护实参不被函数修改
```

```c
int i;
const int* p1=&i;//const在*的前面则表明它所指向的东西不能被修改
int const* p2=&i;//和第一个是一样的
int *const p3=&i;//*在const则表明指针不能被修改
//判断哪个被const了的标志是const在*的前面还是后面
```

# 指针数组

1、什么是指针数组？

所谓的指针数组，其本质上是一个数组，数组中的每一个元素都是指针类型的，都可以指向对应数据类型的地址

2、指针数组的定义

定义的一般格式：数据类型\*指针数组名[数组元素个数];

3、指针数组的使用

以指针数组存储字符串形式代替二维字符数组，达到省空间的目的。

## 数组指针

1、什么是数组指针

所谓的数组指针，其本质上是一个指针，是一个用于指向数组地址的指针。

2、数组指针的定义

一般格式：

所指向数组的数据类型（\*指针变量名）[所指向数组的大小];

如：int  arr[2][4]={0};

int (\*p)[4];

//定义了一个整型数组指针p,用于指向列数为4的整型二维数组p=arr;//将整型数组指针p指向二维数组a
